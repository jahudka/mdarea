{"version":3,"sources":["mdarea.js"],"names":["root","factory","define","amd","module","exports","MarkdownArea","self","this","ctrlKey","test","navigator","platform","reDoubledInline","rePrefix","reSingleQuotePrefix","reList","reListEnd","reCleanIndent","rePureIndent","reIncrement","reStripLast","reMkIndent","codeBlocks","`","~","openingParens","[","(","{","<","closingParens","]",")","}",">","defaultKeymap","enter","indent","outdent","inline","elem","options","_options","keyMap","knownKeys","list","action","hasOwnProperty","keys","Array","isArray","toString","trim","split","push","apply","map","key","normalizeKey","forEach","shortcut","altKey","shiftKey","metaKey","normalizeKeyMap","length","join","_reOutdent","RegExp","_handleKey","bind","setElement","opts","k","toLowerCase","value","s","e","selectionStart","selectionEnd","arguments","window","evt","InputEvent","dispatchEvent","toIndent","prefix","pure","replace","prototype","constructor","getElement","_elem","removeEventListener","addEventListener","getValue","setValue","destroy","defaultPrevented","find","prop","matchesKey","substring","selection","postfix","shift","info","str","offset","lastIndexOf","line","m","exec","charAt","base","_","n","parseInt","handleEnterKey","handleIndentKey","reOutdent","handleOutdentKey","slice","preventDefault"],"mappings":"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","file":"mdarea.min.js","sourcesContent":["(function(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define([], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = factory();\n    } else {\n        root.MarkdownArea = factory();\n    }\n})(typeof self !== 'undefined' ? self : this, function() {\n\n    var isMac = /mac|iphone|ipad|ipod/i.test(navigator.platform),\n        ctrlKey = isMac ? 'metaKey' : 'ctrlKey',\n        reDoubledInline = /[*_]/,\n        rePrefix = /^[ \\t]*(?:(?:[-+*]|\\d+\\.)[ \\t]+(?:\\[[ x]][ \\t]+)?|>[ \\t]*)*(?::[ \\t]*)?/,\n        reSingleQuotePrefix = /[-=\\s\"'`<>\\[\\](){}+*^$\\\\.|]$/,\n        reList = /(?:[-+*]|\\d+\\.)[ \\t]+(?:\\[[ x]][ \\t]+)?$/,\n        reListEnd = /^(?:\\n|$)/,\n        reCleanIndent = /[-+*\\[\\]x\\d.]/g,\n        rePureIndent = /[^ \\t]/g,\n        reIncrement = /(\\d+)\\.(?=[ \\t]+$)/,\n        reStripLast = /(?:(?:^[ \\t]+)?(?:[-+*]|\\d+\\.|[>:])(?:[ \\t]+\\[[ x]])?[ \\t]*|^[ \\t]+)$/,\n        reMkIndent = /^(?!$)/mg,\n        codeBlocks = {'`': /^``$/m, '~': /^~~$/m},\n        openingParens = {'[': ']', '(': ')', '{': '}', '<': '>'},\n        closingParens = {']': '[', ')': '(', '}': '{', '>': '<'};\n\n    var defaultKeymap = {\n        enter: ['Enter', 'Shift+Enter'],\n        indent: ['Tab', 'Cmd+m'],\n        outdent: ['Shift+Tab', 'Cmd+Shift+m'],\n        inline: ['\"', \"'\", '`', '*', '_', '[', ']', '(', ')', '{', '}', '<', '>'],\n    };\n\n\n    function MarkdownArea(elem, options) {\n        this._options = normalizeOptions(options);\n        this._reOutdent = new RegExp('^' + this._options.indent, 'mg');\n        this._handleKey = this._handleKey.bind(this);\n        this.setElement(elem);\n    }\n\n    MarkdownArea.prototype = {\n        constructor: MarkdownArea,\n\n        getElement: function () {\n            return this._elem;\n        },\n\n        setElement: function (elem) {\n            if (this._elem) {\n                this._elem.removeEventListener('keydown', this._handleKey);\n            }\n\n            this._elem = elem;\n            elem.addEventListener('keydown', this._handleKey);\n        },\n\n        getValue: function () {\n            return this._elem.value;\n        },\n\n        setValue: function (value) {\n            this._elem.value = value;\n        },\n\n        destroy: function () {\n            this._elem.removeEventListener('keydown', this._handleKey);\n            this._elem = this._options = this._reOutdent = this._handleKey = null;\n        },\n\n        _handleKey: function (evt) {\n            if (!evt.defaultPrevented) {\n                var shortcut = this._options.keyMap.find(function(shortcut) {\n                    return matchesKey(evt, shortcut.key);\n                });\n\n                if (shortcut) {\n                    var prefix = this._elem.value.substring(0, this._elem.selectionStart),\n                        selection = this._elem.value.substring(this._elem.selectionStart, this._elem.selectionEnd),\n                        postfix = this._elem.value.substring(this._elem.selectionEnd);\n\n                    switch (shortcut.action) {\n                        case 'enter':\n                            handleEnterKey(this._elem, prefix, selection, postfix, this._options.indent, evt.shiftKey);\n                            break;\n                        case 'indent':\n                            handleIndentKey(this._elem, prefix, selection, postfix, this._options.indent);\n                            break;\n                        case 'outdent':\n                            handleOutdentKey(this._elem, prefix, selection, postfix, this._options.indent, this._reOutdent);\n                            break;\n                        case 'inline':\n                            handleInlineKey(this._elem, prefix, selection, postfix, evt.key);\n                            break;\n                    }\n\n                    evt.preventDefault();\n                }\n            }\n        }\n    };\n\n    function normalizeOptions(options) {\n        options || (options = {});\n        options.keyMap = normalizeKeyMap(options.keyMap);\n        options.indent = normalizeIndent(options.indent || 4);\n        return options;\n    }\n\n    function normalizeKeyMap(keyMap) {\n        keyMap || (keyMap = {});\n        var knownKeys = {};\n        var list = [];\n\n        for (var action in defaultKeymap) if (defaultKeymap.hasOwnProperty(action)) {\n            var keys = keyMap[action] || defaultKeymap[action];\n\n            if (!Array.isArray(keys)) {\n                keys = keys.toString().trim().split(/\\s*[|,]\\s*/g);\n            }\n\n            list.push.apply(list, keys.map(function(key) {\n                key = normalizeKey(key);\n                key.key in knownKeys || (knownKeys[key.key] = 0);\n                ++knownKeys[key.key];\n\n                return {\n                    key: key,\n                    action: action\n                };\n            }));\n        }\n\n        list.forEach(function(shortcut) {\n            if (knownKeys[shortcut.key.key] > 1) {\n                completeModifiers(shortcut.key);\n            }\n        });\n\n        return list;\n    }\n\n    function normalizeKey(key) {\n        var opts = {};\n\n        key.trim().split(/\\s*\\+\\s*/g).forEach(function(k) {\n            switch (k.toLowerCase()) {\n                case 'cmd':\n                    opts[ctrlKey] = true;\n                    break;\n                case 'ctrl':\n                case 'alt':\n                case 'shift':\n                case 'meta':\n                    opts[k.toLowerCase() + 'Key'] = true;\n                    break;\n                default:\n                    opts.key = k;\n            }\n        });\n\n        return opts;\n    }\n\n    function completeModifiers(key) {\n        'ctrlKey' in key || (key.ctrlKey = false);\n        'altKey' in key || (key.altKey = false);\n        'shiftKey' in key || (key.shiftKey = false);\n        'metaKey' in key || (key.metaKey = false);\n    }\n\n    function normalizeIndent(indent) {\n        if (typeof indent !== 'number') {\n            indent = (indent + '').length;\n        }\n\n        return new Array(indent + 1).join(' ');\n    }\n\n    function matchesKey(evt, key) {\n        for (var prop in key) if (key.hasOwnProperty(prop)) {\n            if (evt[prop] !== key[prop]) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function handleEnterKey (elem, prefix, selection, postfix, indent, shift) {\n        var info = !selection ? getLineInfo(prefix) : null;\n\n        if (!selection) {\n            if (info.line && info.line.charAt(info.line.length - 1) in openingParens) {\n                var base = (info.prefix ? toIndent(info.prefix, true) : '');\n                postfix = \"\\n\" + base + postfix;\n\n                if (!shift) {\n                    prefix += \"\\n\" + base + indent;\n                }\n            } else if (info.prefix) {\n                if (!shift && info.prefix === info.line && reListEnd.test(postfix)) {\n                    prefix = prefix.substring(0, info.offset) + stripLast(info.prefix);\n                } else if (!shift && isList(info.prefix)) {\n                    prefix += \"\\n\" + increment(info.prefix);\n                } else {\n                    prefix += \"\\n\" + toIndent(info.prefix, shift);\n                }\n            } else {\n                prefix += \"\\n\";\n            }\n        } else {\n            prefix += \"\\n\";\n        }\n\n        apply(elem, prefix + postfix, prefix.length);\n    }\n\n    function handleIndentKey (elem, prefix, selection, postfix, indent) {\n        var s = prefix.length,\n            n = prefix.lastIndexOf(\"\\n\") + 1;\n\n        if (n < s) {\n            selection = prefix.substring(n) + selection;\n            prefix = prefix.substring(0, n);\n        }\n\n        if (n < s || !selection) {\n            s += indent.length;\n        }\n\n        if (selection) {\n            selection = selection.replace(reMkIndent, indent);\n        } else {\n            prefix += indent;\n        }\n\n        apply(elem, prefix + selection + postfix, s, selection ? n + selection.length : s);\n    }\n\n    function handleOutdentKey (elem, prefix, selection, postfix, indent, reOutdent) {\n        var s = prefix.length,\n            n = prefix.lastIndexOf(\"\\n\") + 1;\n\n        if (n < s) {\n            selection = prefix.substring(n) + selection;\n            prefix = prefix.substring(0, n);\n\n            if (selection.substring(0, indent.length) === indent) {\n                s -= indent.length;\n            }\n        }\n\n        selection = selection.replace(reOutdent, '');\n        apply(elem, prefix + selection + postfix, s, n + selection.length);\n    }\n\n    function handleInlineKey (elem, prefix, selection, postfix, key) {\n        if (!selection && !(key in openingParens) && postfix.charAt(0) === key) {\n            apply(elem, prefix + (reDoubledInline.test(key) ? key + key : '') + postfix, prefix.length + 1);\n        } else if (!selection && (key === \"'\" && !reSingleQuotePrefix.test(prefix) || key in closingParens)) {\n            apply(elem, prefix + key + postfix, prefix.length + 1);\n        } else if (!selection && key in codeBlocks && codeBlocks[key].test(prefix)) {\n            apply(elem, prefix + key + \"language\\n\" + key + key + key + (postfix.charAt(0) !== \"\\n\" ? \"\\n\" : '') + postfix, prefix.length + 1, prefix.length + 9);\n        } else if (key === prefix.slice(-1) && key === postfix.slice(0, 1)) {\n            apply(\n                elem,\n                prefix.slice(0, -1) + selection + postfix.slice(1),\n                prefix.length - 1,\n                prefix.length - 1 + selection.length\n            );\n        } else {\n            apply(\n                elem,\n                prefix + (closingParens[key] || key) + selection + (openingParens[key] || key) + postfix,\n                prefix.length + 1,\n                prefix.length + 1 + selection.length\n            );\n        }\n    }\n\n    function apply(elem, value, s, e) {\n        elem.value = value;\n        elem.selectionStart = s;\n        elem.selectionEnd = arguments.length > 3 ? e : s;\n\n        if ('InputEvent' in window) try {\n            var evt = new InputEvent('input');\n            elem.dispatchEvent(evt);\n        } catch (e) { }\n    }\n\n    function getLineInfo(str) {\n        var offset = str.lastIndexOf(\"\\n\") + 1,\n            line = str.substring(offset),\n            m = rePrefix.exec(line);\n\n        return {\n            line: line,\n            offset: offset,\n            prefix: m && m[0]\n        };\n    }\n\n    function isList(prefix) {\n        return reList.test(prefix);\n    }\n\n    function toIndent(prefix, pure) {\n        return prefix.replace(pure ? rePureIndent : reCleanIndent, ' ');\n    }\n\n    function increment(prefix) {\n        return prefix.replace(reIncrement, function (_, n) {\n            return (parseInt(n) + 1) + '.';\n        })\n    }\n\n    function stripLast(prefix) {\n        return prefix.replace(reStripLast, '');\n    }\n\n\n    return MarkdownArea;\n\n});\n"]}